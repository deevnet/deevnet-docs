{{- $completed := .completed | default 0 -}}
{{- $in_progress := .in_progress | default 0 -}}
{{- $planned := .planned | default 0 -}}
{{- $total := add $completed (add $in_progress $planned) -}}

{{- if gt $total 0 -}}
<div class="progress-container">
  <div class="progress-bar">
    {{- if gt $completed 0 -}}
    <div class="progress-segment-completed" style="width: {{ mul (div (float $completed) (float $total)) 100 }}%;" title="{{ $completed }} completed"></div>
    {{- end -}}
    {{- if gt $in_progress 0 -}}
    <div class="progress-segment-in-progress" style="width: {{ mul (div (float $in_progress) (float $total)) 100 }}%;" title="{{ $in_progress }} in progress"></div>
    {{- end -}}
    {{- if gt $planned 0 -}}
    <div class="progress-segment-planned" style="width: {{ mul (div (float $planned) (float $total)) 100 }}%;" title="{{ $planned }} planned"></div>
    {{- end -}}
  </div>
  <div class="progress-legend">
    <span class="progress-legend-completed">&#x2713; {{ $completed }}</span> |
    <span class="progress-legend-in-progress">&#x21bb; {{ $in_progress }}</span> |
    <span class="progress-legend-planned">&#x23f3; {{ $planned }}</span>
    ({{ $total }} total)
  </div>
</div>
{{- end -}}
